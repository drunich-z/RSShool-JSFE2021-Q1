(()=>{"use strict";var e,t,n,a,i,r={732:(e,t,n)=>{n.d(t,{G:()=>i});class a{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}removeAllChilds(){for(;this.element.firstChild;)this.element.lastChild&&this.element.removeChild(this.element.lastChild)}addChild(e="div",t=[],n=""){const a=document.createElement(e);a.classList.add(...t),a.innerHTML=n,this.element.appendChild(a)}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}class i extends a{constructor(e){super("div",["popup-wrapper","hidden"]),this.coverElement=document.getElementById("cover"),this.bodyElement=document.body,this.popupTextContainer=new a("div",["popup-text-contaier"]),this.okButton=new a("div",["popup-ok-button"]),this.popupTextContainer.element.innerText=e,this.okButton.element.innerText="OK",document.body.appendChild(this.element),this.element.appendChild(this.popupTextContainer.element),this.element.appendChild(this.okButton.element)}show(){this.bodyElement.classList.add("notScrollable"),this.coverElement&&this.coverElement.classList.remove("hidden"),this.element.classList.remove("hidden"),this.okButton.element.addEventListener("click",(()=>{this.removeAllChilds(),document.body.removeChild(this.element),this.coverElement&&this.coverElement.classList.add("hidden")}))}}},517:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>g});var a=n(598),i=n(832),r=n(137),s=n(385),o=n(648),d=n(435),c=n(813),l=n(549),u=e([r,a,i,o,d,l]);[r,a,i,o,d,l]=u.then?await u:u;const g={async mainRoute(){const e=document.querySelector(".burger-link_active");e&&e.classList.remove("burger-link_active"),l.Z.activeCategory={name:"",id:-1,description:""},l.Z.cards=[],l.Z.page="main",d.Z.renderMainPage();const t=document.getElementById("burger-link-main");t&&t.classList.add("burger-link_active"),i.Z.switchOffMainContainerControls(),i.Z.initMainContainerControls()},async categoryRoute(){o.Z.renderCategoryPage(),i.Z.switchOffMainContainerControls(),i.Z.initMainContainerControls()},async statisticsRoute(){document.getElementById("main-container").innerHTML="СТРАНИЦА СТАТИСТИКИ <br> ЕЩЁ ДОДЕЛЫВАЮ (",i.Z.switchOffMainContainerControls()},async adminRoute(){c.Z.renderAdminPage(),i.Z.switchOffMainContainerControls(),s.Z.initAdminControls()},async initControlls(){a.Z.initBurger(),r.Z.initSwitch()}}}))},385:(e,t,n)=>{n.d(t,{Z:()=>i});const a=async e=>{const t=document.getElementById("preview"),n=e.target.files[0],a=await(async e=>new Promise((t=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result)})))(n);t.setAttribute("src",a)},i={formCard:document.getElementById("form-card"),formCardSubmit:document.getElementById("form-card-submit"),formCardInputPicture:document.getElementById("input-picture"),formCardInputSound:document.getElementById("input-sound"),formCardPreview:document.getElementById("preview"),async initAdminControls(){this.formCard=document.getElementById("form-card"),this.formCardSubmit=document.getElementById("form-card-submit"),this.formCardInputPicture=document.getElementById("input-picture"),this.formCardInputSound=document.getElementById("input-sound"),this.formCardPreview=document.getElementById("preview"),this.formCardInputPicture.addEventListener("change",a),this.formCard.onsubmit=async e=>{e.preventDefault();const t=new FormData(this.formCard);t.append("categoryId","7"),await fetch("http://localhost:3000/api/cards",{method:"POST",body:t})}}}},598:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>c});var a=n(268),i=n(549),r=n(755),s=n(832),o=n(732),d=e([i,s]);[i,s]=d.then?await d:d;const c={burgerBtn:document.getElementById("burger-menu_button"),burgerMenu:document.getElementById("burger-menu"),burgerLinks:document.getElementById("burger-links"),coverElement:document.getElementById("cover"),bodyElement:document.getElementById("body"),adminPanel:document.getElementById("burger-link-admin"),login:document.getElementById("burger-link-login"),logout:document.getElementById("burger-link-logout"),async initBurger(){this.burgerBtn=document.getElementById("burger-menu_button"),this.burgerMenu=document.getElementById("burger-menu"),this.coverElement=document.getElementById("cover"),this.bodyElement=document.getElementById("body"),this.burgerLinks=document.getElementById("burger-links");const e=await a.Z.getCategories();this.burgerLinks.innerHTML=r.Z.renderBurger(e),this.adminPanel=document.getElementById("burger-link-admin"),this.login=document.getElementById("burger-link-login"),this.logout=document.getElementById("burger-link-logout"),this.burgerBtn.addEventListener("click",(e=>this.burgerBtnHandler(e))),this.coverElement.addEventListener("click",this.handleBurger.bind(this)),this.burgerLinks.addEventListener("click",(e=>this.handleBurgerLinks(e)))},burgerBtnHandler(e){e.preventDefault(),this.handleBurger()},handleBurger(){this.bodyElement.classList.toggle("notScrollable"),this.coverElement.classList.toggle("hidden"),this.burgerMenu.classList.toggle("burger-menu_active")},async handleBurgerLinks(e){e.preventDefault();const t=e.target;if(t.classList.contains("burger-link")&&!t.classList.contains("burger-link_active")){i.Z.activeGame=!1;const e=document.querySelector(".burger-link_active");!e||t.classList.contains("burger-link-login")||t.classList.contains("burger-link-logout")||e.classList.remove("burger-link_active"),t.classList.contains("burger-link-login")||t.classList.contains("burger-link-logout")||t.classList.add("burger-link_active"),"main"===t.dataset.type&&(i.Z.page="main",window.location.hash="main",this.handleBurger()),"category"===t.dataset.type&&(i.Z.page="category",i.Z.activeCategory.name=t.dataset.link,i.Z.cards=await a.Z.getCardsOfCategory(i.Z.activeCategory.name),window.location.hash=" ",window.location.hash="category",this.handleBurger()),"statistics"===t.dataset.type&&(i.Z.page="statistics",window.location.hash="statistics",this.handleBurger()),"login"===t.dataset.type&&this.handleLogin(),"logout"===t.dataset.type&&this.handleLogout(),"admin"===t.dataset.type&&(i.Z.page="admin",window.location.hash="admin",this.handleBurger())}},handleLogout(){i.Z.authorized=!1,this.adminPanel.classList.toggle("hidden"),this.logout.classList.toggle("hidden"),this.login.classList.toggle("hidden"),this.handleBurger(),i.Z.page="main",window.location.hash="main"},handleLogin(){s.Z.switchOffMainContainerControls();const e=document.createElement("div");e.innerHTML=r.Z.renderLoginForm(),this.bodyElement.append(e);const t=document.getElementById("btnOk"),n=document.getElementById("btnCancel"),a=document.getElementById("input-login"),d=document.getElementById("input-pass");this.burgerMenu.classList.toggle("burger-menu_active");const c=()=>{this.bodyElement.classList.toggle("notScrollable"),this.coverElement.classList.toggle("hidden"),e.remove(),s.Z.initMainContainerControls()};t.addEventListener("click",(e=>{if(e.preventDefault(),"admin"===a.value&&"admin"===d.value)return i.Z.authorized=!0,this.adminPanel.classList.toggle("hidden"),this.logout.classList.toggle("hidden"),this.login.classList.toggle("hidden"),void c();new o.G("login and password are not suitable").show()})),n.addEventListener("click",(e=>{e.preventDefault(),c()}))}}}))},832:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>o});var a=n(268),i=n(549),r=n(701),s=e([i]);i=(s.then?await s:s)[0];const o={mainContainer:document.getElementById("main-container"),initMainContainerControls(){this.mainContainer=document.getElementById("main-container"),this.mainContainer.addEventListener("click",this.mainHandler)},switchOffMainContainerControls(){this.mainContainer=document.getElementById("main-container"),this.mainContainer.removeEventListener("click",this.mainHandler)},mainHandler(e){e.preventDefault();const t=e.target;let n=t.closest(".main-card");n&&async function(e){const t=document.querySelector(".burger-link_active");t&&t.classList.remove("burger-link_active"),document.getElementById(`burger-link-${e.dataset.id}`).classList.add("burger-link_active"),i.Z.activeCategory=await a.Z.getCategoryByName(String(e.dataset.category)),i.Z.cards=await a.Z.getCardsOfCategory(String(e.dataset.category)),i.Z.page="category",window.location.hash="category"}(n),n=t.closest(".card"),n&&"train"===i.Z.applicationMode&&async function(e){const t=e.closest(".card");t.classList.contains("translate")||e.classList.contains("rotate")||"train"!==i.Z.applicationMode||r.Z.playAudio(`${String(t.dataset.audiosrc)}`)}(e.target),n&&"game"===i.Z.applicationMode&&i.Z.activeGame&&function(e){const t=e.closest(".card"),n=document.getElementById("rating");if(t.dataset.word===i.Z.cardsForGame[i.Z.correctWordsCounter].word)if(t.classList.add("inactive"),i.Z.correctWordsCounter++,n.appendChild(r.Z.createDOMElement("div",["star-success"])),r.Z.playAudio("./assets/resource/control-audio/correct.mp3"),i.Z.correctWordsCounter>=i.Z.wordsCounter)0===i.Z.errorWordsCounter?r.Z.popup("win",i.Z.errorWordsCounter):r.Z.popup("lose",i.Z.errorWordsCounter),i.Z.initGameState(!1),document.getElementById("rating").innerHTML="",window.location.hash="main";else{const e=`${i.Z.cardsForGame[i.Z.correctWordsCounter].audio}`;setTimeout((()=>r.Z.playAudio(e)),500)}else t.classList.contains("inactive")||(i.Z.errorWordsCounter++,n.appendChild(r.Z.createDOMElement("div",["star-error"])),r.Z.playAudio("./assets/resource/control-audio/error.mp3"))}(e.target),t.classList.contains("rotate")&&"train"===i.Z.applicationMode&&async function(e){const t=e.closest(".card");t.classList.add("translate"),t.addEventListener("mouseleave",(()=>{t.classList.remove("translate"),t.removeEventListener("mouseleave",(()=>{t.classList.remove("translate")}))}))}(t),t.classList.contains("btn")&&"game"===i.Z.applicationMode&&(document.getElementById("rating").classList.remove("none"),t.classList.contains("repeat")||(i.Z.initGameState(),t.classList.add("repeat")),r.Z.playAudio(`${i.Z.cardsForGame[i.Z.correctWordsCounter].audio}`))}}}))},137:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>s});var a=n(549),i=n(598),r=e([a,i]);[a,i]=r.then?await r:r;const s={switchInput:document.getElementById("switch-input"),initSwitch(){this.switchInput=document.getElementById("switch-input"),this.switchInput.addEventListener("change",this.switchHandler.bind(this))},switchHandler(){i.Z.burgerMenu.classList.toggle("green"),this.switchInput.checked?a.Z.applicationMode="train":a.Z.applicationMode="game","main"!==a.Z.page&&"category"!==a.Z.page||(window.location.hash=" ",window.location.hash=a.Z.page)}}}))},303:(e,t,n)=>{n.a(e,(async e=>{var t=n(755),a=n(911),i=n(517),r=n(549),s=e([i,a,r]);[i,a,r]=s.then?await s:s,await r.Z.tempInitStore(),await t.Z.renderBaseTemplate(),a.Z.init(),i.Z.initControlls(),e()}),1)},268:(e,t,n)=>{n.d(t,{Z:()=>r});const a="./assets/resource/data-categories.json",i="./assets/resource/data-cards.json",r={async getCategories(){const e=await fetch(a);return await e.json()},async getCategoryByName(e){const t=await fetch(a),n=await t.json(),[i]=n.filter((t=>t.name===e));return i},async getCategoryById(e){const t=await fetch(a),[n]=await t.json(),[i]=Array(n).filter((t=>t.id===e));return i},async getCardsOfCategory(e){const t=await fetch(i),n=await t.json(),a=await this.getCategoryByName(e);return n.filter((t=>t.category===e)).map((e=>({word:e.word,translation:e.translation,image:e.image,audio:e.audio,category:a})))},async getAllCards(){const e=await fetch(i);return await e.json()},updateStatistics(e){const t=`EFK-${e.word}`;localStorage.setItem(t,JSON.stringify(e))},getStatistics(){const e=[],t=Object.keys(localStorage);for(let n=0;n<t.length;n++)-1!==t[n].indexOf("EFK-",0)&&e.push(JSON.parse(localStorage.getItem(t[n])));return e},clearStistics(){let e;const t=Object.keys(localStorage);for(let n=0;n<t.length;n++)-1!==t[n].indexOf("EFK-",0)&&(e=Object.assign(Object.assign({},JSON.parse(localStorage.getItem(t[n]))),{trainClicks:0,gameCorrectClicks:0,gameErrorClicks:0,gameCorrectPercent:0}),localStorage.setItem(t[n],JSON.stringify(e)))},deleteStistics(){const e=Object.keys(localStorage);for(let t=0;t<e.length;t++)-1!==e[t].indexOf("EFK-",0)&&localStorage.removeItem(e[t])},initStatistics(e){let t;this.deleteStistics();for(let n=0;n<e.length;n++)t=`EFK-${e[n].word}`,localStorage.setItem(t,JSON.stringify(e[n]))}}},813:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(755);const i={renderAdminPage(){document.getElementById("main-container").innerHTML=`\n    <div id="admin-container" class="admin-container">\n    ${a.Z.renderCardForAdminPage()}\n    </div>\n    `}}},648:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>s});var a=n(549),i=n(755),r=e([a]);a=(r.then?await r:r)[0];const s={renderCategoryPage(){document.getElementById("main-container").innerHTML=i.Z.renderCardsForCategoryPage(a.Z.cards,a.Z.applicationMode)}}}))},435:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>s});var a=n(549),i=n(755),r=e([a]);a=(r.then?await r:r)[0];const s={renderMainPage(){document.getElementById("main-container").innerHTML=i.Z.renderCardsForMainPage(a.Z.cardsForMainPage,a.Z.applicationMode)}}}))},911:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>s});var a=n(517),i=e([a]);function r(){const e=function(){const e=window.location.hash?window.location.hash.slice(1):"",[t]=e.split("/");return t}();e&&("main"===e&&a.Z.mainRoute(),"category"===e&&a.Z.categoryRoute(),"statistics"===e&&a.Z.statisticsRoute(),"admin"===e&&a.Z.adminRoute())}a=(i.then?await i:i)[0];const s={async init(){window.addEventListener("hashchange",r),window.location.hash="main",r()}}}))},549:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>r});var a=n(268),i=n(701);const r={categories:await a.Z.getCategories(),activeCategory:{name:"",id:-1,description:""},cards:[],cardsForMainPage:[],page:"main",applicationMode:"train",statistics:[],gameErrors:0,cardsForGame:[],wordsCounter:0,correctWordsCounter:0,errorWordsCounter:0,activeGame:!1,authorized:!1,async tempInitStore(){this.categories=await a.Z.getCategories(),[this.activeCategory]=this.categories,this.cards=await a.Z.getCardsOfCategory(this.activeCategory.name),this.cardsForGame=this.cards.slice(),this.cardsForMainPage=await i.Z.getFirstCardOfEachCategory(),this.page="main",this.applicationMode="train"},initGameState(e=!0){this.gameErrors=0,this.cardsForGame=this.cards.slice(),this.cardsForGame=i.Z.shuffle(this.cardsForGame),this.wordsCounter=this.cardsForGame.length,this.correctWordsCounter=0,this.errorWordsCounter=0,this.activeGame=e}};e()}),1)},701:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(268);const i={async initStatistics(){const e=[],t=await a.Z.getAllCards(),n={word:"",translation:"",category:{name:"",id:-1,description:""},trainClicks:0,gameCorrectClicks:0,gameErrorClicks:0,gameCorrectPercent:0};for(let a=0;a<t.length;a++)n.word=t[a].word,n.translation=t[a].translation,n.category=t[a].category,e.push(n);return e},async getFirstCardOfEachCategory(){const e=[],t=await a.Z.getCategories();for(let n=0;n<t.length;n++)[e[n]]=await a.Z.getCardsOfCategory(t[n].name);return e},playAudio(e){const t=new Audio;t.src=e,t.currentTime=0,t.play()},shuffle(e){let t;for(let n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),[e[n],e[t]]=[e[t],e[n]];return e},createDOMElement(e="div",t=[],n=""){const a=document.createElement(e);return a.classList.add(...t),a.innerHTML=n,a},popup(e,t){let n,a,i;"win"===e?(n="./assets/resource/control-audio/win.mp3",i="./assets/resource/control-img/success.jpg",a="Win!!!"):(n="./assets/resource/control-audio/failure.mp3",i="./assets/resource/control-img/failure.jpg",a=`Lose...(${t} errors)`);const r=`\n      <div>${a}</div>\n      <img src="${i}" alt="game result">\n    `,s=document.getElementById("body"),o=document.getElementById("cover"),d=this.createDOMElement("div",["popup"],r);s.append(d),this.playAudio(n),s.classList.toggle("notScrollable"),o.classList.toggle("hidden"),setTimeout((()=>{s.classList.toggle("notScrollable"),o.classList.toggle("hidden"),s.removeChild(d)}),3e3)}}},755:(e,t,n)=>{n.d(t,{Z:()=>a});const a={async renderBaseTemplate(){document.getElementById("body").innerHTML='\n    <div class="wrapper">\n      <header class="header">\n\n        <h1 id="invisible" class = "invisible">English for kids</h1>\n\n        <nav id="burger-menu" class="burger-menu green">\n          <a href id="burger-menu_button" class="burger-menu_button">\n            <span class="burger-menu_lines"></span>\n          </a>\n          <ul id="burger-links" class="burger-links green">\n          </ul>\n        </nav>\n\n        <div class="switch-container" id="switch-container">\n          <label for="switch-input" class="switch">\n            <input\n              id = "switch-input"\n              class="switch-input"\n              type="checkbox"\n              checked\n            >\n            <span id="switch-label" class="switch-label" data-on="train" data-off="play"></span>\n            <span id="switch-handle" class="switch-handle"></span>\n          </label>\n        </div>\n      </header>\n      <div id="main-container" class="main-container">\n        <div id="rating" class="rating none"> </div>\n        \n        ТУТ БУДУТ КАРТОЧКИ\n        <br>\n        ДО КОНЦА КРОССЧЕКА ПОСТАРАЮСЬ ДОДЕЛАТЬ ФУНКЦИОНАЛ\n\n      </div>\n      <footer class="footer">\n        <a href="https://rs.school/js/" "rsschool-href"> \n          <img class="rsschool-logo" src="./assets/resource/control-img/rs_school_js.svg" alt="School logo">\n        </a>\n        <a href="https://github.com/drunich-z/" target="_blank"> \n            <img class="github-logo" src="./assets/resource/control-img/github-logo.png" alt="Git logo">\n        </a>\n        <div id="student" class="student">\n          drunich-z, 2021\n        </div>\n\n      </footer>\n      <div id="cover" class="cover hidden"></div>\n    </div>\n    '},renderBurger(e){let t="";t='<a id="burger-link-main" href="#main" class="burger-link burger-link_active" data-type="main">MAIN</a>';for(let n=0;n<e.length;n++)t+=`<a id="burger-link-${e[n].id}" href="#category"class="burger-link" data-type="category" data-id="${e[n].id}"data-link="${e[n].name}">${e[n].name}</a>`;return t+='<a href="#statistics" class="burger-link" data-type="statistics" data-link="statistics">STATISTICS</a>',t+='<a id="burger-link-login" href="#login" class="burger-link burger-link-login" data-type="login" data-link="login">LOGIN</a>',t+='<a id="burger-link-logout" href="#logout" class="burger-link burger-link-logout hidden" data-type="logout" data-link="logout">LOGOUT</a>',t+='<a id="burger-link-admin" href="#admin" class="burger-link burger-link-admin hidden" data-type="admin" data-link="admin">ADMIN PANEL</a>',t},renderCardsForCategoryPage(e,t="train"){const n="train"===t?"":"none",a="train"===t?"":"card-cover";let i='<div id="rating" class="rating none"></div>';for(let t=0;t<e.length;t++)i+=`\n        <div class="card-container">\n          <div id="card-${e[t].word}" \n               class="card ${a}" \n               data-word=${e[t].word}\n               data-audiosrc=${e[t].audio}>\n            <div class="front" style="background-image: url('${e[t].image}')">\n              <div class="card-header ${n}">${e[t].word}</div>\n\n            </div>\n            <div class="back ${n}" style="background-image: url('${e[t].image}')">\n              <div class="card-header ${n}">${e[t].translation}</div>\n            </div>\n            <div class="rotate ${n}" \n                 style="background-image: url('./assets/resource/control-img/rotate.svg')"\n                 data-word="${e[t].word}">\n            </div>\n          </div>\n        </div>\n      `;return i+=`\n      <div id="btns" class="btns"> \n        <button id="button-start" \n                class="btn ${"train"===t?"none":""}"> \n          Start game\n        </button>\n              \n      </div>\n      `,i},renderCardsForMainPage(e,t="train"){const n="train"===t?"green":"";let a="";for(let t=0;t<e.length;t++)a+=`\n      <a href="#category" class="main-card ${n}" \n                          data-category="${e[t].category.name}" \n                          data-id="${e[t].category.id}">\n        <img src="${e[t].image}" alt="category-picture" class="pict">\n        ${e[t].category.name}\n      </a>\n      `;return a},renderCardForAdminPage:()=>'\n      <form id="form-card" action="submit" class="form-card">\n        <div class="form-row">\n          <label id="label-word" for="input-word">word:</label>\n          <input name="word" id="input-word" type="text" class="input-word">\n        </div>\n        <div class="form-row">\n          <label id="label-translation" for="input-translation">translation:</label>\n          <input name="translation" id="input-translation" type="text" class="input-transation">\n        </div>\n        <div class="form-row">\n          <label id="label-sound" for="input-sound">sound:</label>\n          <input name="sound" id="input-sound" type="file" class="input-sound" accept=".mp3" >\n        </div>\n        <div class="form-row">\n          <label id="label-picture" for="input-picture">picture:</label>\n          <input name="picture" id="input-picture" type="file" class="input-picture" accept="image/*">\n        </div>\n\n        <span id="output" class="output">\n          <img id="preview" class="preview" src="" alt="preview">\n        </span>\n        \n        <input id="form-card-submit" type="submit">\n\n      </form>\n    ',renderLoginForm:()=>'\n      <form id="form-login" action="submit" class="form-login">\n      <div class="login-header">LOGIN  (admin/admin is correct)</div>\n      <div class="login-row">\n        <label id="label-login" for="input-login"></label>\n        <input name="input-login" id="input-login" type="text" class="input-login" placeholder="LOGIN">\n      </div>\n      <div class="login-row">\n        <label id="label-login" for="input-pass"></label>\n        <input name="input-pass" id="input-pass" type="password" class="input-pass" placeholder="PASSWORD">\n      </div>\n      <div class="login-footer">\n        <button id="btnCancel" class="btn-cancel">Cancel</button>\n        <button id="btnOk" class="btn-ok">Ok</button>\n      </div>\n    </form>\n    '}}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return r[e](n,n.exports,o),n.exports}e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a=e=>!--e.r&&e(),i=(e,t)=>e?e.push(t):a(t),o.a=(r,s,o)=>{var d,c,l,u=o&&[],g=r.exports,m=!0,h=!1,p=(t,n,a)=>{h||(h=!0,n.r+=t.length,t.map(((t,i)=>t[e](n,a))),h=!1)},y=new Promise(((e,t)=>{l=t,c=()=>(e(g),n(u),u=0)}));y[t]=g,y[e]=(e,t)=>{if(m)return a(e);d&&p(d,e,t),i(u,e),y.catch(t)},r.exports=y,s((r=>{if(!r)return c();var s,o;d=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var s=[];r.then((e=>{o[t]=e,n(s),s=0}));var o={[e]:(e,t)=>(i(s,e),r.catch(t))};return o}}return{[e]:e=>a(e),[t]:r}})))(r);var l=new Promise(((e,n)=>{(s=()=>e(o=d.map((e=>e[t])))).r=0,p(d,s,n)}));return s.r?l:o})).then(c,l),m=!1},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o(303)})();