(()=>{"use strict";var t,e,a,n,r,s={517:(t,e,a)=>{a.a(t,(async t=>{a.d(e,{Z:()=>d});var n=a(598),r=a(832),s=a(137),i=a(648),o=a(435),c=t([r,s,n,i,o]);[r,s,n,i,o]=c.then?await c:c;const d={async mainRoute(){o.Z.renderMainPage()},async categoryRoute(){i.Z.renderCategoryPage()},async statisticsRoute(){document.getElementById("main-container").innerHTML="СТРАНИЦА СТАТИСТИКИ <br> ЕЩЁ ДОДЕЛЫВАЮ ("},async initControlls(){n.Z.initBurger(),s.Z.initSwitch(),r.Z.initMainContainerControls()}}}))},598:(t,e,a)=>{a.a(t,(async t=>{a.d(e,{Z:()=>o});var n=a(268),r=a(549),s=a(755),i=t([r]);r=(i.then?await i:i)[0];const o={burgerBtn:document.getElementById("burger-menu_button"),burgerMenu:document.getElementById("burger-menu"),burgerLinks:document.getElementById("burger-links"),coverElement:document.getElementById("cover"),bodyElement:document.getElementById("body"),async initBurger(){this.burgerBtn=document.getElementById("burger-menu_button"),this.burgerMenu=document.getElementById("burger-menu"),this.coverElement=document.getElementById("cover"),this.bodyElement=document.getElementById("body"),this.burgerLinks=document.getElementById("burger-links");const t=await n.Z.getCategories();this.burgerLinks.innerHTML=s.Z.renderBurger(t),this.burgerBtn.addEventListener("click",(t=>this.burgerBtnHandler(t))),this.coverElement.addEventListener("click",this.handleBurger.bind(this)),this.burgerLinks.addEventListener("click",(t=>this.handleBurgerLinks(t)))},burgerBtnHandler(t){t.preventDefault(),this.handleBurger()},handleBurger(){this.bodyElement.classList.toggle("notScrollable"),this.coverElement.classList.toggle("hidden"),this.burgerMenu.classList.toggle("burger-menu_active")},async handleBurgerLinks(t){t.preventDefault();const e=t.target;if(e.classList.contains("burger-link")&&!e.classList.contains("burger-link_active")){const t=document.querySelector(".burger-link_active");t&&t.classList.remove("burger-link_active"),e.classList.add("burger-link_active"),"main"===e.dataset.type&&(r.Z.page="main",window.location.hash="main",this.handleBurger()),"category"===e.dataset.type&&(r.Z.page="category",r.Z.activeCategory.name=e.dataset.link,r.Z.cards=await n.Z.getCardsOfCategory(r.Z.activeCategory.name),window.location.hash=" ",window.location.hash="category",this.handleBurger()),"statistics"===e.dataset.type&&(r.Z.page="statistics",window.location.hash="statistics",this.handleBurger())}}}}))},832:(t,e,a)=>{a.a(t,(async t=>{a.d(e,{Z:()=>o});var n=a(268),r=a(549),s=a(701),i=t([r]);r=(i.then?await i:i)[0];const o={mainContainer:document.getElementById("main-container"),async initMainContainerControls(){this.mainContainer=document.getElementById("main-container"),this.mainContainer.addEventListener("click",(t=>this.mainHandler(t)))},async mainHandler(t){t.preventDefault();const e=t.target;let a=e.closest(".main-card");a&&async function(t){const e=document.querySelector(".burger-link_active");e&&e.classList.remove("burger-link_active"),document.getElementById(`burger-link-${t.dataset.id}`).classList.add("burger-link_active"),r.Z.activeCategory={name:String(t.dataset.category),id:Number(t.dataset.id)},r.Z.cards=await n.Z.getCardsOfCategory(String(t.dataset.category)),r.Z.page="category",window.location.hash="category"}(a),a=e.closest(".card"),a&&"train"===r.Z.applicationMode&&async function(t){const e=t.closest(".card");e.classList.contains("translate")||t.classList.contains("rotate")||"train"!==r.Z.applicationMode||s.Z.playAudio(`./assets/resource/${String(e.dataset.audiosrc)}`)}(t.target),a&&"game"===r.Z.applicationMode&&async function(t){const e=t.closest(".card"),a=document.getElementById("rating");if(e.dataset.word===r.Z.cardsForGame[r.Z.correctWordsCounter].word)if(e.classList.add("inactive"),r.Z.correctWordsCounter++,a.appendChild(s.Z.createDOMElement("div",["star-success"])),s.Z.playAudio("./assets/resource/control-audio/correct.mp3"),r.Z.correctWordsCounter>=r.Z.wordsCounter)0===r.Z.errorWordsCounter?s.Z.popup("win",r.Z.errorWordsCounter):s.Z.popup("lose",r.Z.errorWordsCounter),r.Z.initGameState(),document.getElementById("rating").innerHTML="",window.location.hash="main";else{const t=`./assets/resource/${r.Z.cardsForGame[r.Z.correctWordsCounter].audio}`;setTimeout((()=>s.Z.playAudio(t)),500)}else e.classList.contains("inactive")||(r.Z.errorWordsCounter++,a.appendChild(s.Z.createDOMElement("div",["star-error"])),s.Z.playAudio("./assets/resource/control-audio/error.mp3"))}(t.target),e.classList.contains("rotate")&&"train"===r.Z.applicationMode&&async function(t){const e=t.closest(".card");e.classList.add("translate"),e.addEventListener("mouseleave",(()=>{e.classList.remove("translate"),e.removeEventListener("mouseleave",(()=>{e.classList.remove("translate")}))}))}(e),e.classList.contains("btn")&&"game"===r.Z.applicationMode&&(document.getElementById("rating").classList.remove("none"),e.classList.contains("repeat")||(r.Z.initGameState(),e.classList.add("repeat")),s.Z.playAudio(`./assets/resource/${r.Z.cardsForGame[r.Z.correctWordsCounter].audio}`))}}}))},137:(t,e,a)=>{a.a(t,(async t=>{a.d(e,{Z:()=>i});var n=a(549),r=a(598),s=t([n,r]);[n,r]=s.then?await s:s;const i={switchInput:document.getElementById("switch-input"),initSwitch(){this.switchInput=document.getElementById("switch-input"),this.switchInput.addEventListener("change",this.switchHandler.bind(this))},switchHandler(){r.Z.burgerMenu.classList.toggle("green"),this.switchInput.checked?n.Z.applicationMode="train":n.Z.applicationMode="game","main"!==n.Z.page&&"category"!==n.Z.page||(window.location.hash=" ",window.location.hash=n.Z.page)}}}))},303:(t,e,a)=>{a.a(t,(async t=>{var e=a(755),n=a(911),r=a(517),s=a(549),i=t([r,n,s]);[r,n,s]=i.then?await i:i,await s.Z.tempInitStore(),await e.Z.renderBaseTemplate(),n.Z.init(),r.Z.initControlls(),t()}),1)},268:(t,e,a)=>{a.d(e,{Z:()=>r});const n="./assets/resource/data.json",r={async getCategories(){const t=await fetch(n),[e]=await t.json();return e.map((t=>({id:e.indexOf(t),name:t})))},async getCardsOfCategory(t){const e=await fetch(n),[a,...r]=await e.json();return r[a.indexOf(t)].filter((e=>e.category===t)).map((e=>({word:e.word,translation:e.translation,image:e.image,audio:e.audioSrc,category:{name:e.category,id:a.indexOf(t)}})))},async getAllCards(){const t=await fetch(n),[e,...a]=await t.json();return a},updateStatistics(t){const e=`EFK-${t.word}`;localStorage.setItem(e,JSON.stringify(t))},getStatistics(){const t=[],e=Object.keys(localStorage);for(let a=0;a<e.length;a++)-1!==e[a].indexOf("EFK-",0)&&t.push(JSON.parse(localStorage.getItem(e[a])));return t},clearStistics(){let t;const e=Object.keys(localStorage);for(let a=0;a<e.length;a++)-1!==e[a].indexOf("EFK-",0)&&(t=Object.assign(Object.assign({},JSON.parse(localStorage.getItem(e[a]))),{trainClicks:0,gameCorrectClicks:0,gameErrorClicks:0,gameCorrectPercent:0}),localStorage.setItem(e[a],JSON.stringify(t)))},deleteStistics(){const t=Object.keys(localStorage);for(let e=0;e<t.length;e++)-1!==t[e].indexOf("EFK-",0)&&localStorage.removeItem(t[e])},initStatistics(t){let e;this.deleteStistics();for(let a=0;a<t.length;a++)e=`EFK-${t[a].word}`,localStorage.setItem(e,JSON.stringify(t[a]))}}},648:(t,e,a)=>{a.a(t,(async t=>{a.d(e,{Z:()=>i});var n=a(549),r=a(755),s=t([n]);n=(s.then?await s:s)[0];const i={renderCategoryPage(){document.getElementById("main-container").innerHTML=r.Z.renderCardsForCategoryPage(n.Z.cards,n.Z.applicationMode)}}}))},435:(t,e,a)=>{a.a(t,(async t=>{a.d(e,{Z:()=>i});var n=a(549),r=a(755),s=t([n]);n=(s.then?await s:s)[0];const i={renderMainPage(){document.getElementById("main-container").innerHTML=r.Z.renderCardsForMainPage(n.Z.cardsForMainPage,n.Z.applicationMode)}}}))},911:(t,e,a)=>{a.a(t,(async t=>{a.d(e,{Z:()=>i});var n=a(517),r=t([n]);function s(){const t=function(){const t=window.location.hash?window.location.hash.slice(1):"",[e]=t.split("/");return e}();t&&("main"===t&&n.Z.mainRoute(),"category"===t&&n.Z.categoryRoute(),"statistics"===t&&n.Z.statisticsRoute())}n=(r.then?await r:r)[0];const i={async init(){window.addEventListener("hashchange",s),window.location.hash="main",s()}}}))},549:(t,e,a)=>{a.a(t,(async t=>{a.d(e,{Z:()=>s});var n=a(268),r=a(701);const s={categories:await n.Z.getCategories(),activeCategory:{name:"",id:-1},cards:[],cardsForMainPage:[],page:"main",applicationMode:"train",statistics:[],gameErrors:0,cardsForGame:[],wordsCounter:0,correctWordsCounter:0,errorWordsCounter:0,activeGame:!1,async statInit(){const t=n.Z.getStatistics();0===t.length?this.statistics=await r.Z.initStatistics():this.statistics=t},async tempInitStore(){this.categories=await n.Z.getCategories(),[this.activeCategory]=this.categories,this.cards=await n.Z.getCardsOfCategory(this.activeCategory.name),this.cardsForGame=this.cards.slice(),this.cardsForMainPage=await r.Z.getFirstCardOfEachCategory(),this.page="main",this.applicationMode="train"},initGameState(){this.gameErrors=0,this.cardsForGame=this.cards.slice(),this.cardsForGame=r.Z.shuffle(this.cardsForGame),this.wordsCounter=this.cardsForGame.length,this.correctWordsCounter=0,this.errorWordsCounter=0,this.activeGame=!0}};t()}),1)},701:(t,e,a)=>{a.d(e,{Z:()=>r});var n=a(268);const r={async initStatistics(){const t=[],e=await n.Z.getAllCards(),a={word:"",translation:"",category:{name:"",id:0},trainClicks:0,gameCorrectClicks:0,gameErrorClicks:0,gameCorrectPercent:0};for(let n=0;n<e.length;n++)a.word=e[n].word,a.translation=e[n].translation,a.category=e[n].category,t.push(a);return t},async getFirstCardOfEachCategory(){const t=[],e=await n.Z.getCategories();return[t[0]]=await n.Z.getCardsOfCategory(e[0].name),[t[1]]=await n.Z.getCardsOfCategory(e[1].name),[t[2]]=await n.Z.getCardsOfCategory(e[2].name),[t[3]]=await n.Z.getCardsOfCategory(e[3].name),[t[4]]=await n.Z.getCardsOfCategory(e[4].name),[t[5]]=await n.Z.getCardsOfCategory(e[5].name),[t[6]]=await n.Z.getCardsOfCategory(e[6].name),[t[7]]=await n.Z.getCardsOfCategory(e[7].name),t},playAudio(t){const e=new Audio;e.src=t,e.currentTime=0,e.play()},shuffle(t){let e;for(let a=t.length-1;a>0;a--)e=Math.floor(Math.random()*(a+1)),[t[a],t[e]]=[t[e],t[a]];return t},createDOMElement(t="div",e=[],a=""){const n=document.createElement(t);return n.classList.add(...e),n.innerHTML=a,n},popup(t,e){let a,n,r;"win"===t?(a="./assets/resource/control-audio/win.mp3",r="./assets/resource/control-img/success.jpg",n="Win!!!"):(a="./assets/resource/control-audio/failure.mp3",r="./assets/resource/control-img/failure.jpg",n=`Lose...(${e} errors)`);const s=`\n      <div>${n}</div>\n      <img src="${r}" alt="game result">\n    `,i=document.getElementById("body"),o=document.getElementById("cover"),c=this.createDOMElement("div",["popup"],s);i.append(c),this.playAudio(a),i.classList.toggle("notScrollable"),o.classList.toggle("hidden"),setTimeout((()=>{i.classList.toggle("notScrollable"),o.classList.toggle("hidden"),i.removeChild(c)}),3e3)}}},755:(t,e,a)=>{a.d(e,{Z:()=>n});const n={async renderBaseTemplate(){document.getElementById("body").innerHTML='\n    <div class="wrapper">\n      <header class="header">\n\n        <h1 id="invisible" class = "invisible">English for kids</h1>\n\n        <nav id="burger-menu" class="burger-menu green">\n          <a href id="burger-menu_button" class="burger-menu_button">\n            <span class="burger-menu_lines"></span>\n          </a>\n          <ul id="burger-links" class="burger-links green">\n          </ul>\n        </nav>\n\n        <div class="switch-container" id="switch-container">\n          <label for="switch-input" class="switch">\n            <input\n              id = "switch-input"\n              class="switch-input"\n              type="checkbox"\n              checked\n            >\n            <span id="switch-label" class="switch-label" data-on="train" data-off="play"></span>\n            <span id="switch-handle" class="switch-handle"></span>\n          </label>\n        </div>\n      </header>\n      <div id="main-container" class="main-container">\n        <div id="rating" class="rating none"> </div>\n        \n        ТУТ БУДУТ КАРТОЧКИ\n        <br>\n        ДО КОНЦА КРОССЧЕКА ПОСТАРАЮСЬ ДОДЕЛАТЬ ФУНКЦИОНАЛ\n\n      </div>\n      <footer class="footer">\n        <a href="https://rs.school/js/" "rsschool-href"> \n          <img class="rsschool-logo" src="./assets/resource/control-img/rs_school_js.svg" alt="School logo">\n        </a>\n        <a href="https://github.com/drunich-z/" target="_blank"> \n            <img class="github-logo" src="./assets/resource/control-img/github-logo.png" alt="Git logo">\n        </a>\n        <div id="student" class="student">\n          drunich-z, 2021\n        </div>\n\n      </footer>\n      <div id="cover" class="cover hidden"></div>\n    </div>\n    '},renderBurger(t){let e="";e='<a id="burger-link-main" href="#main" class="burger-link burger-link_active" data-type="main">MAIN</a>';for(let a=0;a<t.length;a++)e+=`<a id="burger-link-${t[a].id}" href="#category"class="burger-link" data-type="category" data-id="${t[a].id}"data-link="${t[a].name}">${t[a].name}</a>`;return e+='<a href="#statistics" class="burger-link" data-type="statistics" data-link="statistics">STATISTICS</a>',e},renderCardsForCategoryPage(t,e="train"){const a="train"===e?"":"none",n="train"===e?"":"card-cover";let r='<div id="rating" class="rating none"></div>';for(let e=0;e<t.length;e++)r+=`\n        <div class="card-container">\n          <div id="card-${t[e].word}" \n               class="card ${n}" \n               data-word=${t[e].word}\n               data-audiosrc=${t[e].audio}>\n            <div class="front" style="background-image: url('./assets/resource/${t[e].image}')">\n              <div class="card-header ${a}">${t[e].word}</div>\n\n            </div>\n            <div class="back ${a}" style="background-image: url('./assets/resource/${t[e].image}')">\n              <div class="card-header ${a}">${t[e].translation}</div>\n            </div>\n            <div class="rotate ${a}" \n                 style="background-image: url('./assets/resource/control-img/rotate.svg')"\n                 data-word="${t[e].word}">\n            </div>\n          </div>\n        </div>\n      `;return r+=`\n      <div id="btns" class="btns"> \n        <button id="button-start" \n                class="btn ${"train"===e?"none":""}"> \n          Start game\n        </button>\n              \n      </div>\n      `,r},renderCardsForMainPage(t,e="train"){const a="train"===e?"green":"";let n="";for(let e=0;e<t.length;e++)n+=`\n      <a href="#category" class="main-card ${a}" \n                          data-category="${t[e].category.name}" \n                          data-id="${t[e].category.id}">\n        <img src="./assets/resource/${t[e].image}" alt="category-picture" class="pict">\n        ${t[e].category.name}\n      </a>\n      `;return n}}}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;var a=i[t]={exports:{}};return s[t](a,a.exports,o),a.exports}t="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a=t=>{t&&(t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},n=t=>!--t.r&&t(),r=(t,e)=>t?t.push(e):n(e),o.a=(s,i,o)=>{var c,d,l,g=o&&[],u=s.exports,m=!0,h=!1,y=(e,a,n)=>{h||(h=!0,a.r+=e.length,e.map(((e,r)=>e[t](a,n))),h=!1)},p=new Promise(((t,e)=>{l=e,d=()=>(t(u),a(g),g=0)}));p[e]=u,p[t]=(t,e)=>{if(m)return n(t);c&&y(c,t,e),r(g,t),p.catch(e)},s.exports=p,i((s=>{if(!s)return d();var i,o;c=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[t])return s;if(s.then){var i=[];s.then((t=>{o[e]=t,a(i),i=0}));var o={[t]:(t,e)=>(r(i,t),s.catch(e))};return o}}return{[t]:t=>n(t),[e]:s}})))(s);var l=new Promise(((t,a)=>{(i=()=>t(o=c.map((t=>t[e])))).r=0,y(c,i,a)}));return i.r?l:o})).then(d,l),m=!1},o.d=(t,e)=>{for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o(303)})();